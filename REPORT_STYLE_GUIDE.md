# 📊 보고서급 답변 생성 가이드

LLM이 사용자 질문에 대해 **보고서 수준의 전문적인 답변**을 자동으로 생성하도록 시스템 프롬프트가 설정되었습니다.

---

## ✨ 주요 개선사항

### Before (기존)
```
부품 ABC-12345의 재고는 1000개입니다.
출고 이력은 다음과 같습니다:
1월: 120개
2월: 150개
```

### After (개선)
```markdown
# 📌 부품 ABC-12345 재고 현황 분석

ABC-12345 부품의 현재 재고 및 출고 추이를 분석한 결과입니다.

## 📦 재고 현황

| 항목 | 수량 | 상태 |
|------|------|------|
| 총 재고 | 1,000개 | ✅ 정상 |
| 가용 재고 | 850개 | ✅ 충분 |
| 예약 | 150개 | - |

## 📈 월별 출고 추이

| 월 | 출고량 | 전월 대비 |
|----|--------|-----------|
| 1월 | 120개 | - |
| 2월 | 150개 | 📈 +25% |

\`\`\`json
{
  "type": "line",
  "title": "📈 월별 출고 추이",
  "data": {
    "labels": ["1월", "2월"],
    "datasets": [{
      "label": "출고량",
      "data": [120, 150]
    }]
  }
}
\`\`\`

## 💡 주요 인사이트

- ✅ **재고 상태**: 안전 재고 이상 확보
- 📈 **출고 추세**: 지속적 증가세
- ⚠️ **주의사항**: 3월 출고량 증가 예상, 재고 모니터링 필요

## 📎 출처

- 부품 관리 시스템 (MongoDB)
- 출고 이력 DB
```

---

## 📋 답변 구조

모든 LLM 응답은 다음 구조를 따릅니다:

### 1️⃣ 제목 및 요약 (필수)
```markdown
# 📌 [주제]

[한 줄 요약 - 핵심 내용을 간결하게]
```

**예시**:
```markdown
# 📌 부품 ABC-12345 품질 분석 보고서

최근 6개월간 품질 검사 결과, 합격률 98.5%로 우수한 수준을 유지하고 있습니다.
```

### 2️⃣ 상세 내용 (계층 구조)
```markdown
## 📊 [카테고리 1]

### [세부 항목 1]
- 불릿 포인트
- **중요 정보**: 굵은 글씨

### [세부 항목 2]
- 내용

## 🔍 [카테고리 2]

내용...
```

### 3️⃣ 데이터 시각화 (있는 경우)

**Markdown 표**:
```markdown
| 항목 | 값 | 상태 | 비고 |
|------|----|----|------|
| 데이터1 | 100 | ✅ | 정상 |
| 데이터2 | 50 | ⚠️ | 주의 |
```

**그래프 (JSON)**:
```markdown
\`\`\`json
{
  "type": "line|bar|pie",
  "title": "📈 제목",
  "data": { ... }
}
\`\`\`
```

### 4️⃣ 인사이트 (필수)
```markdown
## 💡 주요 인사이트

### ✅ 긍정적 지표
- 항목 1
- 항목 2

### ⚠️ 주의사항
- 주의할 점 1
- 주의할 점 2
```

### 5️⃣ 출처 (필수)
```markdown
## 📎 출처

- **시스템명**: 데이터 설명
- **문서명**: 페이지 정보
```

---

## 🎨 이모지 사용 가이드

### 섹션 구분용 이모지

| 이모지 | 용도 | 예시 |
|--------|------|------|
| 📌 | 제목, 요약 | `# 📌 재고 현황 분석` |
| 📊 | 데이터, 통계 | `## 📊 월별 출고 현황` |
| 📈 | 증가, 상승 | `📈 전월 대비 +25%` |
| 📉 | 감소, 하락 | `📉 전월 대비 -15%` |
| 💡 | 인사이트, 분석 | `## 💡 주요 인사이트` |
| 🔍 | 상세 분석 | `## 🔍 상세 분석` |
| 📎 | 출처, 참고 | `## 📎 출처` |

### 상태 표시용 이모지

| 이모지 | 의미 | 사용 예시 |
|--------|------|-----------|
| ✅ | 정상, 성공 | `상태: ✅ 정상` |
| ⚠️ | 주의, 경고 | `⚠️ 재고 부족` |
| ❌ | 오류, 실패 | `❌ 검사 불합격` |
| 🔴 | 심각, 위험 | `🔴 긴급 대응 필요` |
| 🟡 | 경미, 모니터링 | `🟡 관찰 필요` |
| 🟢 | 양호, 우수 | `🟢 목표 달성` |

### 업무 분야별 이모지

| 이모지 | 분야 | 예시 |
|--------|------|------|
| 📦 | 재고, 보관 | `## 📦 재고 현황` |
| 🚚 | 출고, 배송 | `## 🚚 출고 현황` |
| 🏭 | 생산, 제조 | `## 🏭 생산 현황` |
| 🔧 | 검사, 품질 | `## 🔧 품질 검사 결과` |
| ⚙️ | 설정, 사양 | `## ⚙️ 부품 사양` |
| 📝 | 문서, 절차 | `## 📝 작업 절차` |

---

## 📐 계층 구조 규칙

### Markdown Heading 사용

```markdown
# H1 - 문서 제목 (한 번만)
## H2 - 주요 섹션
### H3 - 세부 항목
#### H4 - 더 세부적인 항목 (필요시)
```

### 불릿 포인트

```markdown
- 1단계 불릿
  - 2단계 불릿 (들여쓰기 2칸)
    - 3단계 불릿 (들여쓰기 4칸)
```

### 강조

```markdown
**굵은 글씨**: 중요한 숫자, 핵심 키워드
*이탤릭*: 강조, 용어
***굵은 이탤릭***: 매우 중요
```

### 인용문

```markdown
> 중요한 메모나 경고 메시지
> 여러 줄 인용문도 가능
```

### 구분선

```markdown
---
섹션 사이 구분
---
```

---

## 📊 표 작성 가이드

### 기본 표 형식

```markdown
| 헤더1 | 헤더2 | 헤더3 |
|-------|-------|-------|
| 데이터1 | 데이터2 | 데이터3 |
| 데이터4 | 데이터5 | 데이터6 |
```

### 정렬 옵션

```markdown
| 왼쪽 정렬 | 가운데 정렬 | 오른쪽 정렬 |
|:---------|:----------:|----------:|
| 내용 | 내용 | 내용 |
```

### 이모지 포함 표

```markdown
| 부품번호 | 재고 | 상태 | 조치 |
|---------|------|------|------|
| ABC-001 | 1,500 | ✅ 정상 | - |
| ABC-002 | 100 | ⚠️ 부족 | 발주 필요 |
| ABC-003 | 0 | ❌ 품절 | 긴급 발주 |
```

### 복잡한 데이터 표

```markdown
| 월 | 입고 | 출고 | 재고 | 전월 대비 | 상태 |
|----|------|------|------|-----------|------|
| 1월 | 500 | 350 | 1,150 | - | ✅ |
| 2월 | 450 | 400 | 1,200 | 📈 +4.3% | ✅ |
| 3월 | 600 | 500 | 1,300 | 📈 +8.3% | ✅ |
```

---

## 📈 차트 작성 가이드

### Line Chart (추이 분석)

**언제 사용**: 시간에 따른 변화, 추세 분석

```json
{
  "type": "line",
  "title": "📈 월별 출고 추이 (1-6월)",
  "data": {
    "labels": ["1월", "2월", "3월", "4월", "5월", "6월"],
    "datasets": [{
      "label": "출고량 (개)",
      "data": [120, 150, 180, 170, 200, 220],
      "borderColor": "rgba(75, 192, 192, 1)",
      "backgroundColor": "rgba(75, 192, 192, 0.2)",
      "tension": 0.4
    }]
  }
}
```

### Bar Chart (비교)

**언제 사용**: 카테고리 간 비교, 순위

```json
{
  "type": "bar",
  "title": "📊 라인별 생산량 비교 (3월)",
  "data": {
    "labels": ["라인 1", "라인 2", "라인 3", "라인 4"],
    "datasets": [{
      "label": "생산량 (개)",
      "data": [1500, 1200, 980, 750],
      "backgroundColor": [
        "rgba(255, 99, 132, 0.6)",
        "rgba(54, 162, 235, 0.6)",
        "rgba(255, 206, 86, 0.6)",
        "rgba(75, 192, 192, 0.6)"
      ]
    }]
  }
}
```

### Pie Chart (비율, 구성)

**언제 사용**: 전체 중 비율, 구성 요소

```json
{
  "type": "pie",
  "title": "📊 불량 유형별 분포 (2024년 Q1)",
  "data": {
    "labels": ["스크래치", "접착불량", "오염", "치수불량", "기타"],
    "datasets": [{
      "data": [35, 25, 20, 15, 5],
      "backgroundColor": [
        "#FF6384",
        "#36A2EB",
        "#FFCE56",
        "#4BC0C0",
        "#9966FF"
      ]
    }]
  }
}
```

### 다중 데이터셋 (비교 분석)

```json
{
  "type": "line",
  "title": "📈 연도별 출고 추이 비교",
  "data": {
    "labels": ["1월", "2월", "3월", "4월", "5월", "6월"],
    "datasets": [
      {
        "label": "2023년",
        "data": [100, 120, 140, 130, 160, 180],
        "borderColor": "rgba(75, 192, 192, 1)",
        "backgroundColor": "rgba(75, 192, 192, 0.2)"
      },
      {
        "label": "2024년",
        "data": [120, 150, 180, 170, 200, 220],
        "borderColor": "rgba(255, 99, 132, 1)",
        "backgroundColor": "rgba(255, 99, 132, 0.2)"
      }
    ]
  }
}
```

---

## 💡 완벽한 답변 예시

### 예시 1: 재고 조회

**질문**: "ABC-12345 부품의 현재 재고와 최근 출고 현황을 알려줘"

**답변**:
```markdown
# 📌 부품 ABC-12345 재고 및 출고 현황

ABC-12345 부품의 현재 재고는 **1,500개**로 안전 재고 이상을 유지하고 있으며, 최근 3개월간 **지속적인 출고 증가 추세**를 보이고 있습니다.

## 📦 현재 재고 현황

| 항목 | 수량 | 비율 | 상태 |
|------|------|------|------|
| 총 재고 | 1,500개 | 100% | ✅ 정상 |
| 가용 재고 | 1,200개 | 80% | ✅ 충분 |
| 예약 재고 | 300개 | 20% | - |

**보관 위치**: 창고 A, 선반 B-15

## 📈 최근 3개월 출고 추이

| 월 | 출고량 | 누적 | 전월 대비 |
|----|--------|------|-----------|
| 1월 | 350개 | 350개 | - |
| 2월 | 420개 | 770개 | 📈 +20% |
| 3월 | 480개 | 1,250개 | 📈 +14.3% |

\`\`\`json
{
  "type": "line",
  "title": "📈 월별 출고 추이 (1-3월)",
  "data": {
    "labels": ["1월", "2월", "3월"],
    "datasets": [{
      "label": "출고량 (개)",
      "data": [350, 420, 480],
      "borderColor": "rgba(75, 192, 192, 1)",
      "backgroundColor": "rgba(75, 192, 192, 0.2)",
      "tension": 0.4
    }]
  }
}
\`\`\`

## 💡 주요 인사이트

### ✅ 긍정적 지표
- **재고 충분**: 안전 재고(1,000개) 대비 150% 확보
- **출고 증가**: 평균 월 17.2% 증가
- **품질 양호**: 최근 검사 합격률 99.2%

### ⚠️ 주의사항
- **예상 4월 출고**: 약 550개 (현 추세 지속 시)
- **재고 준비**: 5월까지 현재 재고로 충분
- **발주 시점**: 4월 중순 재고 모니터링 필요

## 🔍 상세 분석

### 목적지별 출고 비율 (3월)
- **라인 1**: 192개 (40%)
- **라인 2**: 144개 (30%)
- **라인 3**: 96개 (20%)
- **기타**: 48개 (10%)

### 품질 지표
- **검사 합격률**: 99.2% ✅
- **불량률**: 0.8%
- **반품률**: 0.1%

## 📎 출처

- **부품 관리 시스템**: 실시간 재고 DB (2024-03-15 기준)
- **출고 이력 시스템**: 2024년 1-3월 출고 데이터
- **품질 관리 시스템**: 검사 이력 DB

---

**보고서 작성일**: 2024-03-15
**데이터 기준일**: 2024-03-15 09:00
```

---

## 🎯 작성 체크리스트

LLM이 답변 생성 시 다음을 모두 포함하는지 자동으로 확인:

- [ ] 📌 제목 (H1) - 이모지 포함
- [ ] 한 줄 요약 (핵심 내용)
- [ ] ## 섹션 구분 (H2) - 이모지 포함
- [ ] 표 (데이터가 있는 경우)
- [ ] 그래프 (추이/비교가 있는 경우)
- [ ] 💡 인사이트 섹션
- [ ] ✅/⚠️ 긍정/주의사항 구분
- [ ] 📎 출처 섹션
- [ ] **굵은 글씨**로 핵심 강조
- [ ] 구분선 (---) 사용
- [ ] 적절한 이모지 사용

---

## 🚀 사용 방법

### 1. 자동 적용

LLM에 이미 시스템 프롬프트로 설정되어 있어, **별도 설정 없이** 모든 답변이 자동으로 보고서 형식으로 생성됩니다.

### 2. 테스트

**질문 예시**:
```
최근 6개월 출고 추이를 분석해줘
```

**예상 응답**:
- ✅ 📌 제목과 요약
- ✅ 📊 표와 그래프
- ✅ 💡 인사이트
- ✅ 📎 출처

### 3. 커스터마이징

특정 답변 형식이 필요한 경우, **Custom Prompt** 설정에서 수정 가능:

```
당신은 간결한 답변을 제공하는 챗봇입니다.
이모지 사용을 최소화하고, 핵심만 전달하세요.
```

---

## 📋 FAQ

### Q1: 모든 답변에 이모지가 필요한가요?

**A**: 네, 보고서의 가독성을 높이기 위해 섹션 구분용 이모지는 필수입니다. 단, 간단한 질문("재고는 몇 개?")의 경우 LLM이 자동으로 간소화합니다.

### Q2: 표나 차트가 없는 질문도 이 형식을 따르나요?

**A**: 네, 하지만 LLM이 질문 유형에 따라 적절히 조정합니다. 예를 들어:
- **데이터 질문**: 표 + 그래프 포함
- **절차 질문**: 단계별 리스트
- **간단한 정보**: 간결한 답변

### Q3: 기존 답변 형식으로 되돌리려면?

**A**: Backend 설정에서 `custom_prompt`를 변경하거나, `TEST_MODE=True`로 설정하면 기본 Mock 응답 사용.

### Q4: 사용자가 "간단하게 알려줘"라고 하면?

**A**: LLM이 요청을 인식하고 자동으로 간소화된 답변 제공. 필수 섹션(요약, 출처)은 유지.

---

## 💡 장점

### 1. 즉시 보고서로 사용 가능
- 별도 편집 없이 복사-붙여넣기만으로 보고서 작성
- Word, PowerPoint, Notion 등에 바로 적용

### 2. 일관된 품질
- 모든 답변이 동일한 품질 수준
- 전문적이고 체계적인 구조

### 3. 시각적 가독성
- 이모지로 섹션 빠른 파악
- 표와 그래프로 데이터 시각화
- 계층 구조로 정보 정리

### 4. 의사결정 지원
- 💡 인사이트 섹션으로 핵심 발견사항 제공
- ✅/⚠️ 구분으로 조치사항 명확화

---

## 🎉 결론

이제 모든 LLM 답변이:
- ✅ 보고서 수준의 전문성
- ✅ 이모지와 계층 구조로 가독성 극대화
- ✅ 표와 그래프로 데이터 시각화
- ✅ 인사이트와 출처로 신뢰성 확보

**사용자는 별도 작업 없이 바로 보고서로 활용 가능!** 🚀
