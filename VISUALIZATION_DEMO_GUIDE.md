# 📊 데이터 시각화 데모 가이드

## 🎯 목적

몇년치 출고 데이터를 표와 그래프로 시각화하는 챗봇의 능력을 데모합니다.

---

## 🚀 빠른 시작

### 1. 테스트 모드 실행
```bash
./start_test.sh
```

### 2. 시각화 데모 확인하기

#### 방법 1: 예시 대화 클릭 (추천!)
1. 좌측 사이드바를 엽니다 (햄버거 메뉴 아이콘)
2. **"2021-2023 출고 데이터 분석"** 대화를 클릭
3. 풍부한 표와 그래프를 즉시 확인!

#### 방법 2: 직접 질문하기
채팅 입력창에 다음 질문 중 하나를 입력:

```
최근 3년간 출고 데이터를 표와 그래프로 보여줘
```

또는

```
2021년부터 2023년까지 출고 이력을 분석해줘
```

---

## 📊 표시되는 데이터

### 1. 연도별 출고 현황 요약
텍스트로 요약:
- 2021년: 12,450개
- 2022년: 15,800개 (전년 대비 +26.9%)
- 2023년: 18,200개 (전년 대비 +15.2%)

### 2. 월별 출고 이력 표 (2021-2023)
12개월 x 3년치 데이터를 표 형식으로:

| 월 | 2021년 | 2022년 | 2023년 | 평균 |
|----|--------|--------|--------|------|
| 1월 | 950개 | 1,200개 | 1,450개 | 1,200개 |
| ... | ... | ... | ... | ... |

### 3. 라인별 출고 비율 표
2023년 기준 생산 라인별 출고 현황:

| 라인 | 출고량 | 비율 | 주요 용도 |
|------|--------|------|-----------|
| 라인 1 | 7,280개 | 40% | 주력 생산 라인 |
| 라인 2 | 5,460개 | 30% | 보조 생산 라인 |
| 라인 3 | 3,640개 | 20% | 테스트/검증 |
| 기타 | 1,820개 | 10% | 유지보수/예비 |

### 4. 3년간 출고 추이 그래프 (Line Chart)
월별 출고 추이를 3개 연도로 비교:
- 2021년 (청록색 선)
- 2022년 (파란색 선)
- 2023년 (빨간색 선)

**특징:**
- 부드러운 곡선 (tension: 0.4)
- 반투명 배경색
- 12개월 전체 트렌드 비교

### 5. 연도별 총 출고량 비교 (Bar Chart)
3개 연도의 총량을 막대 그래프로:
- 2021년: 12,450개 (청록색)
- 2022년: 15,800개 (파란색)
- 2023년: 18,200개 (빨간색)

**특징:**
- 성장 추세를 한눈에 파악
- 각 막대에 색상 구분
- 테두리로 명확한 구분

### 6. 라인별 출고 비율 (Pie Chart)
2023년 생산 라인별 비중:
- 라인 1: 40% (빨간색)
- 라인 2: 30% (파란색)
- 라인 3: 20% (노란색)
- 기타: 10% (청록색)

**특징:**
- 비율이 라벨에 표시
- 색상으로 쉽게 구분
- 각 섹션의 크기가 직관적

### 7. 주요 인사이트
LLM이 자동으로 생성한 분석:
1. 지속적인 성장세: 2021년 대비 2023년 46.2% 증가
2. 성수기: 10-12월 출고량이 가장 많음
3. 비수기: 2월, 8월 출고량 감소 경향
4. 라인 1 집중도: 전체 출고의 40%가 라인 1에 집중
5. 안정적 수요: 매년 평균 12-15% 성장률 유지

---

## 🎨 UI 디자인 확인 포인트

### 표 (Table)
- ✅ Markdown 표가 HTML로 자동 변환
- ✅ 깔끔한 격자 선
- ✅ 헤더 행 강조
- ✅ 좌우 정렬 (숫자는 우측 정렬)
- ✅ 반응형 (작은 화면에서 스크롤)

### 그래프 (Charts)
**Line Chart (선 그래프):**
- ✅ 3개 선이 동시에 표시
- ✅ 부드러운 곡선
- ✅ 호버 시 정확한 값 표시
- ✅ 범례 표시 (2021/2022/2023)
- ✅ X축: 월, Y축: 출고량

**Bar Chart (막대 그래프):**
- ✅ 3개 막대 (3년)
- ✅ 각 막대에 다른 색상
- ✅ 호버 시 정확한 값
- ✅ 범례와 제목
- ✅ 세로 방향 막대

**Pie Chart (파이 차트):**
- ✅ 4개 섹션 (4개 라인)
- ✅ 비율이 라벨에 포함
- ✅ 색상 구분 명확
- ✅ 호버 시 세부 정보
- ✅ 범례 표시

### 전체 레이아웃
- ✅ 섹션별 제목 (##)
- ✅ 구분선 (---)
- ✅ 아이콘 사용 (📊, 📅, 🏭, 📈, 🎯, 💡)
- ✅ 강조 텍스트 (**굵게**)
- ✅ 출처 표시 (신뢰도 향상)
- ✅ 스크롤 가능 (긴 콘텐츠)

---

## 🔍 기술적 세부사항

### 그래프 렌더링 과정

1. **LLM 응답 파싱**
   ```
   Mock LLM → JSON 블록 감지 → 그래프 데이터 추출
   ```

2. **MessageBubble 컴포넌트**
   ```jsx
   // JSON 코드 블록 찾기
   const jsonMatches = content.match(/```json\n([\s\S]*?)\n```/g);

   // 각 블록을 차트로 변환
   jsonMatches.forEach(match => {
     const data = JSON.parse(cleaned);
     renderChart(data.type, data.data, data.title);
   });
   ```

3. **Recharts 렌더링**
   ```jsx
   {data.type === 'line' && (
     <ResponsiveContainer width="100%" height={300}>
       <LineChart data={...}>
         <CartesianGrid strokeDasharray="3 3" />
         <XAxis dataKey="label" />
         <YAxis />
         <Tooltip />
         <Legend />
         <Line type="monotone" dataKey="data" ... />
       </LineChart>
     </ResponsiveContainer>
   )}
   ```

### 데이터 구조

```javascript
// Line Chart
{
  "type": "line",
  "title": "월별 출고 추이 (2021-2023)",
  "data": {
    "labels": ["1월", "2월", ...],
    "datasets": [
      {
        "label": "2021년",
        "data": [950, 880, ...],
        "borderColor": "rgba(75, 192, 192, 1)",
        "backgroundColor": "rgba(75, 192, 192, 0.2)",
        "tension": 0.4
      }
    ]
  }
}

// Bar Chart
{
  "type": "bar",
  "title": "연도별 총 출고량",
  "data": {
    "labels": ["2021년", "2022년", "2023년"],
    "datasets": [{
      "label": "출고량 (개)",
      "data": [12450, 15800, 18200],
      "backgroundColor": [...],
      "borderColor": [...]
    }]
  }
}

// Pie Chart
{
  "type": "pie",
  "title": "라인별 출고 비율 (2023년)",
  "data": {
    "labels": ["라인 1 (40%)", ...],
    "datasets": [{
      "data": [7280, 5460, 3640, 1820],
      "backgroundColor": [...],
      "borderColor": [...]
    }]
  }
}
```

---

## 💡 디자인 하이라이트

### 1. 색상 팔레트
- **2021년**: 청록색 (`rgba(75, 192, 192, *)`)
- **2022년**: 파란색 (`rgba(54, 162, 235, *)`)
- **2023년**: 빨간색 (`rgba(255, 99, 132, *)`)
- **기타**: 노란색 (`rgba(255, 206, 86, *)`)

### 2. 일관성
- 모든 그래프에서 동일한 색상 사용
- Line과 Bar에서 연도별 색상 통일
- 테두리 투명도 0.8-1.0
- 배경 투명도 0.2

### 3. 가독성
- 충분한 여백
- 명확한 제목
- 범례 표시
- 호버 툴팁

### 4. 반응형
- `ResponsiveContainer`로 자동 크기 조절
- 작은 화면에서 스크롤
- 모바일 친화적

---

## 🎯 테스트 체크리스트

### 표 (Table)
- [ ] 월별 출고 이력 표가 표시됨
- [ ] 12개월 x 4열 (2021/2022/2023/평균)
- [ ] 헤더 행이 강조됨
- [ ] 합계 행이 굵게 표시됨
- [ ] 라인별 출고 비율 표 표시
- [ ] 4개 라인 + 합계 행

### 그래프 (Charts)
- [ ] Line Chart 표시 (월별 추이)
- [ ] 3개 선 (2021/2022/2023)
- [ ] 범례 표시
- [ ] 호버 시 값 표시
- [ ] Bar Chart 표시 (연도별 총량)
- [ ] 3개 막대
- [ ] 색상 구분
- [ ] Pie Chart 표시 (라인별 비율)
- [ ] 4개 섹션
- [ ] 비율이 라벨에 포함

### 레이아웃
- [ ] 섹션 제목이 명확함
- [ ] 구분선으로 섹션 분리
- [ ] 아이콘으로 시각적 강조
- [ ] 인사이트 섹션 표시
- [ ] 출처 표시

### 인터랙션
- [ ] 그래프에 호버 가능
- [ ] 범례 클릭으로 데이터 토글
- [ ] 스크롤 가능
- [ ] 확대/축소 (일부 차트)

---

## 🚨 알려진 제한사항

### Mock LLM
- 실제 데이터베이스가 아닌 하드코딩된 데이터
- 항상 동일한 응답 반환
- "출고"와 "년" 키워드로 트리거

### 실제 환경에서
- 실제 DB 쿼리로 동적 데이터
- 날짜 범위 파라미터 지원
- 다양한 필터링 옵션
- 실시간 데이터 업데이트

---

## 🎓 확장 아이디어

### 추가 가능한 시각화
1. **히트맵**: 월별 x 라인별 출고량
2. **산점도**: 재고량 vs 출고량 상관관계
3. **영역 차트**: 누적 출고량 추이
4. **레이더 차트**: 라인별 다차원 성능 비교
5. **박스 플롯**: 월별 출고량 분포

### 인터랙티브 기능
1. 날짜 범위 선택기
2. 부품 필터
3. 라인 선택
4. 데이터 내보내기 (CSV, Excel)
5. 그래프 이미지 다운로드

---

## 📚 관련 문서

- **IMPLEMENTATION_COMPLETE.md**: 전체 프로젝트 완료 상태
- **TESTING_GUIDE.md**: 종합 테스트 가이드
- **CONVERSATION_MANAGEMENT_GUIDE.md**: 대화 관리 가이드

---

**풍부한 데이터 시각화로 더 나은 인사이트!** 📊✨
